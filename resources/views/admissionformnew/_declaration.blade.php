<template id="declaration-template">
    {{-- <fieldset> --}}
        {{-- <legend><strong>Anti- Ragging</strong></legend> --}}
                {{-- @if(isset($guard) && $guard == 'students')  old--}}
        {{-- <strong><p>Step-by-Step Guide to Fill Online Anti- Ragging Affidavit</p>       --}}
            {{-- <p>(Please note that this is mandatory)</p> --}}
        {{-- </strong> --}}
        {{--  old <p> 1) Click any of the link given below to fill the Online Anti-Ragging Undertaking / Affidavit:</p>
            <p style="padding: 0 7px 0 20px;"> a) <a target="_blank" style="color:blue" href="https://www.antiragging.in/">www.antiragging.in</a> and click on 'Register for Undertaking'       OR</p>
            <p style="padding: 0 7px 0 20px;"> b) <a target="_blank" style="color:blue" href="https://amanmovement.org/registration/public/amanmovement/raggingmain.html">https://amanmovement.org/registration/public/amanmovement/raggingmain.html</a> and click on 'Fill Online Affidavit'</p> --}}
        {{-- <p> 1) Click any of the link given below to fill the Online Anti-Ragging Undertaking / Affidavit:</p>
            <p style="padding: 0 7px 0 20px;"> a) <a target="_blank" style="color:blue" href="http://www.antiragging.in/">www.antiragging.in </a>and click on Forms-> 'Register for Undertaking' OR</p>
            <p style="padding: 0 7px 0 20px;"> b) <a target="_blank" style="color:blue" href="https://www.antiragging.in/affidavit_registration_disclaimer.html"> https://www.antiragging.in/affidavit_registration_disclaimer.html</a> </p>  --}}
        
        {{-- <p> 2) Read the regulations on curbing the menace of ragging carefully by clicking the link: <a target="_blank" style="color:blue" href=" https://www.antiragging.in/assets/pdf/information/ugc-iec-guidlines-for-councils-universities-and-colleges-for-curbing-the-menace-of-ragging.pdf">  https://www.antiragging.in/assets/pdf/information/ugc-iec-guidlines-for-councils-universities-and-colleges-for-curbing-the-menace-of-ragging.pdf</a></p>
        <p> 3) Fill in the required details in the Online Anti Ragging Affidavit Registration Form.</p>
            <p style="margin: 0 0 0 20px;"> <strong>Information below is for the Student’s reference to fill this form</strong></p>
            <p style="margin: 0 0 0 20px;">Director’s Name: Dr. Nisha Bhargava</p>
            <p style="margin: 0 0 0 20px;"> College Phone no: 91-172-2624921</p>
            <p style="margin: 0 0 0 20px;"> College Landline no: 0172-2603355</p>
            <p style="margin: 0 0 0 20px;">Nearest Police Station: Sector 36, Chandigarh</p>
            <p style="margin: 0 0 0 20px;">Number of students in your class:40</p>
        <p> 4) Submit the Undertaking. </p>
        <p> 5) You will receive Anti-Ragging Undertaking Reference Number and a web link.</p>
        <p> 6) Fill the Anti-Ragging Undertaking Reference Number in the space provided below.</p>  --}}
        
        {{-- <div style="margin: 0 0 47px 0;"> --}}
            {{-- <b> 
                
            </b> --}}
            {{-- {!! Form::label('antireg_ref_no','Anti- Ragging Reference No',['class' => 'col-sm-3 control-label']) !!} --}}
            {{-- <div class="col-sm-9"> --}}
                    {{-- <input type="text" name="antireg_ref_no" v-model='antireg_ref_no'> --}}
                    {{-- <span id="basic-msg" v-if="errors['antireg_ref_no']" class="help-block">@{{ errors['antireg_ref_no'][0] }}</span> --}}
            {{-- </div> --}}
        {{-- </div> --}}
        {{-- <p> 7) Forward the same (Reference Number and a web link) on the Email Address of the Nodal Officer of the College at  <strong style="color:red">mcm.antiraggingcell@gmail.com </strong></p>  --}}
        {{-- <p>	<b>Note:</b> You may also visit Step by Step Guide on ‘How to Fill an Online Anti Ragging Affidavit Registration Form available at  <a target="_blank" style="color:blue" href="https://www.antiragging.in">www.antiragging.in</a></p>  --}}
        
        {{-- old <p style="margin: 0 0 0 20px;"> <strong>For the Student’s reference to fill the Online Anti Ragging Affidavit Registration Form:</strong></p>
        <p style="margin: 0 0 0 20px;">Director’s Name: Dr. Nisha Bhargava</p>
        <p style="margin: 0 0 0 20px;"> College Phone no: 91-172-2624921</p>
        <p style="margin: 0 0 0 20px;"> College Landline no: 0172-2603355</p>
        <p style="margin: 0 0 0 20px;">Nearest Police Station: Sector 36, Chandigarh</p>
        <p style="margin: 0 0 0 20px;">Number of students in your class:40</p> --}}
        
    {{-- </fieldset> --}}
    <fieldset>
        <legend><strong>Declaration</strong></legend>
        {{-- @if(isset($guard) && $guard == 'students') --}}
        <p> 1. I hereby declare that I have noted all the information and instructions given in the College Prospectus.</p>
        <p> 2. I pledge to abide by the rules and regulations of the College and the University and not to associate
        myself with any activity that goes against the discipline of the Institution.</p>
        <p> 3. I declare that the facts stated above are true and that I have not so far been admitted to any affiliated
        College in the class to which I am seeking admission in this College.</p>
        <p> 4. I solemnly declare that I have not been disqualified by any University for the class that I am seeking admission to in this
        College.</p>
        <p> 5. I will have no claim to admission if found ineligible by Panjab University.</p>
        <p> 6. I will adhere to all the academic rules and regulations of the College including attendance, examination, 
        internal assessment or any other requirements of the course.</p> 
        {{-- <p> 7. I will pay the fee and all the dues as per the schedule notified by the College from time to time.</p>  --}}
        <p>	7. I shall not resort to ragging in any form at any place and shall abide by the rules / laws prescribed by the 
        Government of India, Indian law and the College authorities for the purpose from time to time.</p> 
        <p> 8. I will submit an Online Anti-Ragging Undertaking every academic year at the Anti-Ragging Web Portal of 
        Government of India: <b><a href="http://www.antiragging.in/" target="blank">www.antiragging.in</a></b></p>
        {{-- <p>10. My Parents/Guardian fully endorse the Declaration made by me.</p> 
        <p>11. I hereby undertake that I will submit the signed copy of my Parents'/Guardians' endorsement of the Declaration made by 
        me,as and when notified by the College</p>  --}}
        <p><b>9.It is my personal responsibility to inform the College office of any change in my address / phone number or that of my parents / guardians. 
        The College is not responsible for any gap in communication in case my personal information is not updated by me. </b></p>
        <p><b> All information provided by me is correct and any misrepresentation of facts / information found hereafter may lead to 
        my expulsion from the College.</b></p>			
            <p><b> 
                <span id="basic-msg" v-if="errors['terms_conditions']" class="help-block">@{{ errors['terms_conditions'][0] }}</span>
            </b></p>
            {!! Form::label('terms_conditions','I agree to all the above mentioned clauses. ',['class' => 'col-sm-5 control-label']) !!}
            <div class="col-sm-7">
                <label class="checkbox">
                    <input type="checkbox" name="terms_conditions" v-model = 'terms_conditions' v-bind:true-value="'Y'"
                        v-bind:false-value="'N'" class="minimal">
                </label>
            </div>

           
        
        {{-- @endif --}}
            <div>
                {{-- <span id="basic-msg" class="help-block">Please 'Update' data, in case of any changes, before leaving the current tab !</span> --}}
                {{-- <span id="basic-msg" class="help-block">Click the "Update" button before leaving the current tab, in case there have been any changes.</span> --}}
            
            </div>

            <input v-on:click="rediretPreviousTab" v-show="active_tab >= 5" class="btn btn-primary"  type="button" value="Previous" >
            <input class="btn btn-primary"  type="button" :value="admForm.active_tab >= 6 ? 'Update' : 'Submit'" @click.prevent="submit">
            <input v-on:click="rediretNextTab" v-show="active_tab >= 6" class="btn btn-primary"  type="button" value="Next" >
    </fieldset>
    
</template>

@push('vue-components')
    <script>
        var declarationComponent = Vue.extend({
            template: '#declaration-template',
            props:['active_tab', 'admForm', 'form_id'],
            data: function(){
                return {
                    terms_conditions: "@if(isset($guard) && $guard == 'web') {{'Y'}} @elseif($adm_form->terms_conditions == 'Y') {{'Y'}} @else {{'Y'}} @endif".trim(),
                    response: {},
                    success: false,
                    fails: false,
                    msg: '',
                    errors: [],
                    antireg_ref_no:''
                }
            },
            ready: function(){
                this.antireg_ref_no = this.admForm.antireg_ref_no;
            },
            methods: {
                rediretNextTab: function(){
                    $('a[href="#adm-attachment"]').click();
                },

                rediretPreviousTab: function(){
                    $('a[href="#foreign-migration-alumni"]').click();
                },

                submit: function() {
                    var self = this;
                    self.errors = {};
                    var data = {
                        form_id: self.form_id,
                        terms_conditions: self.terms_conditions,
                        active_tab: 6,
                        antireg_ref_no:self.antireg_ref_no,
                    }
                    self.$http[self.getMethod()](self.getUrl(), data)
                    .then(function (response) {
                        if (response.data.success) {
                        self.form_id = response.data.form_id;
                        self.active_tab = response.data.active_tab;
                        self.admForm.active_tab = response.data.active_tab;
                        // self.admForm = response.data.adm_form;
                        $.blockUI({ message: '<h3> Record successfully saved !!</h3>' });
                        setTimeout(function(){
                            $.unblockUI();
                        },1000);
                        
                        // setTimeout(function() {
                        //   self.success = false;
                        //   window.location = self.admitUrl+'/' +self.form_id +'/details';
                        // }, 3000);
                        }
                    }, function (response) {
                        self.fails = true;
                        if(response.status == 422) {
                            $('body').scrollTop(0);
                            self.errors = response.data;
                        }              
                    });
                },

                getMethod: function() {
                    if(this.admForm.active_tab >= 6)
                    return 'patch';
                    else
                    return 'post';
                },

                getUrl: function() {
                    if(this.admForm.active_tab >= 6)
                    return 'adm-declaration/'+this.form_id;
                    else
                    return 'adm-declaration';
                },
            },
            
        });

        Vue.component('declaration-component', declarationComponent)
    </script>
@endpush
